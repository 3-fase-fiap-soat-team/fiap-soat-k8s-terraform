# terraform.tfvars - Configuração otimizada para AWS Academy
# Copie este arquivo para terraform.tfvars e ajuste conforme necessário

# Configurações básicas
aws_region   = "us-east-1"
project_name = "fiap-soat"
environment  = "dev"

# VPC - Configuração econômica
vpc_cidr = "10.0.0.0/16"

# EKS Cluster
cluster_name    = "fiap-soat-cluster"
cluster_version = "1.30"  # Versão estável atual (1.27 deprecated)

# IMPORTANTE: NAT Gateway desabilitado para economia
# Nodes serão colocados em public subnets para acesso à internet
enable_nat_gateway = false

# Configuração otimizada para AWS Academy
use_public_subnets_for_nodes = true  # NOVO: nodes em public subnets

# Node Groups - Configuração ultra-econômica
node_groups = {
  general = {
    instance_types = ["t3.micro"]     # Menor instância disponível
    capacity_type  = "ON_DEMAND"      # Previsível para Academy
    min_size       = 1                # Mínimo absoluto
    max_size       = 1                # Limite para evitar escalonamento
    desired_size   = 1                # Apenas 1 node
  }
}

# Add-ons essenciais (compatíveis com Kubernetes 1.30)
cluster_addons = {
  kube-proxy = {
    version = "v1.30.3-eksbuild.5"
  }
  vpc-cni = {
    version = "v1.18.5-eksbuild.1"
  }
  coredns = {
    version = "v1.11.3-eksbuild.2"
  }
}

# Acesso ao cluster - Aberto para desenvolvimento
endpoint_config = {
  private_access      = true
  public_access       = true
  public_access_cidrs = ["0.0.0.0/0"]  # AWS Academy - desenvolvimento
}

# Tags para controle de custos
tags = {
  Project      = "fiap-soat-fase3"
  Environment  = "dev"
  Owner        = "rs94458"
  Budget       = "aws-academy-50usd"
  CostCenter   = "education"
  AutoShutdown = "true"
  Team         = "3-fase-fiap-soat-team"
}
